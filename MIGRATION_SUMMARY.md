# –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–ª–æ–≥–∞ - Summary

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
‚úÖ –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å 4 –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏:
- **API Gateway** (REST ‚Üí gRPC, –ø–æ—Ä—Ç 8080)
- **Auth Service** (gRPC, –ø–æ—Ä—Ç 50051)
- **Article Service** (gRPC, –ø–æ—Ä—Ç 50052) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π visibility
- **Stats Service** (gRPC, –ø–æ—Ä—Ç 50053) —Å RabbitMQ

### 2. gRPC Proto —Å—Ö–µ–º—ã
‚úÖ –°–æ–∑–¥–∞–Ω—ã proto —Ñ–∞–π–ª—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
- `proto/auth.proto` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `proto/article.proto` - —Å—Ç–∞—Ç—å–∏ —Å visibility (public/private/link)
- `proto/stats.proto` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –ª–∞–π–∫–∏

### 3. Shared –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚úÖ –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `shared/logger/` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `shared/rabbitmq/` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è RabbitMQ

### 4. –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
‚úÖ –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

**Auth Service** (`services/auth-service/`):
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏–Ω
- JWT —Ç–æ–∫–µ–Ω—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- gRPC —Å–µ—Ä–≤–µ—Ä

**Article Service** (`services/article-service/`):
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å—Ç–∞—Ç—å—è–º–∏
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 3 —Ç–∏–ø–æ–≤ –≤–∏–¥–∏–º–æ—Å—Ç–∏**:
  - `public` - –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º
  - `private` - —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä
  - `link` - –¥–æ—Å—Ç—É–ø –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ (access_token)
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –≤ RabbitMQ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Auth Service

**Stats Service** (`services/stats-service/`):
- –ü–æ–¥—Å—á–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏ –ª–∞–π–∫–æ–≤
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏–∑ RabbitMQ
- gRPC API –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**API Gateway** (`services/api-gateway/`):
- REST API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º
- Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 5. Infrastructure
‚úÖ Docker –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è:
- `docker-compose.yml` - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã, PostgreSQL, RabbitMQ
- Dockerfiles –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- Networking –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- SQL –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π `visibility` –∏ `access_token`
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

‚úÖ RabbitMQ:
- Exchange "articles" (topic)
- –°–æ–±—ã—Ç–∏—è: article.viewed, article.liked, article.created

### 6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –≥–∞–π–¥—ã:
- `MICROSERVICES_ARCHITECTURE.md` - –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `GETTING_STARTED.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
- `AI_SERVICE_PLAN.md` - –ø–ª–∞–Ω –¥–ª—è –±—É–¥—É—â–µ–≥–æ AI —Å–µ—Ä–≤–∏—Å–∞
- `FRONTEND_INTEGRATION.md` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
- `Makefile` - –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏

## üöÄ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –°–∏—Å—Ç–µ–º–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å—Ç–∞—Ç–µ–π
- **Public** üì¢ - —Å—Ç–∞—Ç—å—è –≤–∏–¥–Ω–∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- **Private** üîí - —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å
- **Link** üîó - –¥–æ—Å—Ç—É–ø –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ —Å access_token

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –∏ –ª–∞–π–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ RabbitMQ
- –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### gRPC –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –£–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
blog/
‚îú‚îÄ‚îÄ proto/                    # Proto —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth.proto
‚îÇ   ‚îú‚îÄ‚îÄ article.proto
‚îÇ   ‚îî‚îÄ‚îÄ stats.proto
‚îú‚îÄ‚îÄ shared/                   # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ logger/
‚îÇ   ‚îî‚îÄ‚îÄ rabbitmq/
‚îú‚îÄ‚îÄ services/                 # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ api-gateway/
‚îÇ   ‚îú‚îÄ‚îÄ auth-service/
‚îÇ   ‚îú‚îÄ‚îÄ article-service/
‚îÇ   ‚îî‚îÄ‚îÄ stats-service/
‚îú‚îÄ‚îÄ migrations/               # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ add_article_visibility.sql
‚îú‚îÄ‚îÄ backend/                  # Legacy –º–æ–Ω–æ–ª–∏—Ç (–≤—Ä–µ–º–µ–Ω–Ω–æ)
‚îú‚îÄ‚îÄ frontend/                 # React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ docker-compose.yml        # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Makefile                  # –ö–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏
‚îî‚îÄ‚îÄ *.md                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã

```bash
# 1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å proto —Ñ–∞–π–ª—ã
make proto

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
docker-compose exec db psql -U blog -d blog < migrations/add_article_visibility.sql

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ
curl http://localhost:8080/healthz

# 5. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f api-gateway
```

## üé® –ü—Ä–∏–º–µ—Ä—ã API

### –°–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏—á–Ω—É—é —Å—Ç–∞—Ç—å—é
```bash
curl -X POST http://localhost:8080/api/articles \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"title":"My Article","content":"Content...","visibility":"public"}'
```

### –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—É—é —Å—Ç–∞—Ç—å—é
```bash
curl -X POST http://localhost:8080/api/articles \
  -H "Authorization: Bearer TOKEN" \
  -d '{"title":"Private Notes","content":"...","visibility":"private"}'
```

### –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é —Å –¥–æ—Å—Ç—É–ø–æ–º –ø–æ —Å—Å—ã–ª–∫–µ
```bash
curl -X POST http://localhost:8080/api/articles \
  -H "Authorization: Bearer TOKEN" \
  -d '{"title":"Shared","content":"...","visibility":"link"}'
# –í–µ—Ä–Ω–µ—Ç access_token –∏ access_url
```

### –û—Ç–∫—Ä—ã—Ç—å —Å—Ç–∞—Ç—å—é –ø–æ —Å—Å—ã–ª–∫–µ
```bash
curl "http://localhost:8080/api/articles/1?access_token=UUID"
```

## üîÆ –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

### AI Service (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏
- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ `AI_SERVICE_PLAN.md`

### –î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **Notification Service** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **Search Service** - –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- **Media Service** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Analytics Service** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
2. **–ò–∑–æ–ª—è—Ü–∏—è** - –ø—Ä–æ–±–ª–µ–º—ã –≤ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ
3. **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - gRPC –±—ã—Å—Ç—Ä–µ–µ REST
5. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - RabbitMQ –¥–ª—è –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
6. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
7. **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** - –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å—Ç–∞—Ç–µ–π

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –º–æ–Ω–æ–ª–∏—Ç–∞

–°—Ç–∞—Ä—ã–π –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –±—ç–∫–µ–Ω–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∫–∞–∫ `backend-legacy` –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8081. –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –µ–≥–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å:

```yaml
# –£–¥–∞–ª–∏—Ç—å –∏–∑ docker-compose.yml —Å–µ–∫—Ü–∏—é backend
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **–õ–æ–≥–∏**: `docker-compose logs -f SERVICE_NAME`
- **RabbitMQ UI**: http://localhost:15672 (guest/guest)
- **Health checks**: `/healthz` endpoint

## üêõ Troubleshooting

–°–º. —Å–µ–∫—Ü–∏—é Troubleshooting –≤ `GETTING_STARTED.md`

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- gRPC: https://grpc.io/docs/languages/go/
- RabbitMQ: https://www.rabbitmq.com/tutorials/tutorial-one-go.html
- Protocol Buffers: https://protobuf.dev/

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è proto —Ñ–∞–π–ª–æ–≤ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤.
