# Исправление валидации при создании статьи

## Проблема
При попытке опубликовать статью возникала ошибка:
```
Key: 'articleInput.Content' Error:Field validation for 'Content' failed on the 'min' tag
```

## Причина
Бэкенд требует минимальные значения для полей:
- **Title** (заголовок): минимум **3 символа**
- **Content** (текст): минимум **10 символов**

Клиентская валидация отсутствовала, что приводило к отправке невалидных данных на сервер.

## Решение

### 1. Добавлена клиентская валидация в функции handleSubmit

```typescript
const trimmedTitle = form.title.trim();
const trimmedContent = form.content.trim();

// Валидация
if (!trimmedTitle || !trimmedContent) {
  setError('Пожалуйста, заполните название и текст статьи.');
  return;
}

if (trimmedTitle.length < 3) {
  setError('Заголовок должен содержать минимум 3 символа.');
  return;
}

if (trimmedContent.length < 10) {
  setError('Текст статьи должен содержать минимум 10 символов.');
  return;
}
```

### 2. Добавлена HTML5 валидация на уровне полей

**Заголовок:**
```tsx
<input
  minLength={3}
  maxLength={120}
  required
/>
```

**Текст статьи:**
```tsx
<textarea
  minLength={10}
  required
/>
```

### 3. Улучшены подсказки для пользователя

**До:**
- "До 120 символов — будьте доходчивы и интригующие."
- "Лаконичный минимализм поощряется, но смысл важнее длины."

**После:**
- "От 3 до 120 символов — будьте доходчивы и интригующие."
- "Минимум 10 символов. Лаконичный минимализм поощряется, но смысл важнее длины."

### 4. Добавлен динамический счетчик символов

При вводе текста меньше 10 символов отображается:
```
(осталось X симв.)
```

Это помогает пользователю понять, сколько еще нужно ввести.

### 5. Автоматическая очистка ошибок

При редактировании полей ошибка автоматически очищается:

```typescript
function handleChange(event: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) {
  const { name, value } = event.target;
  setForm((prev: ArticlePayload) => ({ ...prev, [name]: value }));
  // Очищаем ошибку при изменении полей
  if (error) {
    setError(null);
  }
}
```

### 6. Очистка ошибки перед отправкой

```typescript
setError(null);  // Очищаем предыдущие ошибки перед новой попыткой
```

## Результат

### Улучшенный UX:
✅ Понятные требования к полям (3+ и 10+ символов)  
✅ Мгновенная обратная связь (счетчик символов)  
✅ Валидация на клиенте (без запросов к серверу)  
✅ Валидация на уровне браузера (HTML5)  
✅ Автоочистка ошибок при вводе  
✅ Понятные сообщения об ошибках на русском языке  

### Защита от ошибок:
- Невозможно отправить пустую форму
- Невозможно отправить слишком короткий заголовок
- Невозможно отправить слишком короткий текст
- Пользователь видит требования до отправки

## Тестирование

### Сценарий 1: Пустые поля
1. Оставить поля пустыми
2. Нажать "Опубликовать"
3. **Результат:** ✅ Ошибка "Пожалуйста, заполните название и текст статьи."

### Сценарий 2: Короткий заголовок
1. Ввести заголовок "12" (2 символа)
2. Ввести текст "Текст статьи больше 10 символов"
3. Нажать "Опубликовать"
4. **Результат:** ✅ Ошибка "Заголовок должен содержать минимум 3 символа."

### Сценарий 3: Короткий текст
1. Ввести заголовок "Заголовок статьи"
2. Ввести текст "Короткий" (8 символов)
3. **Результат:** ✅ Отображается "(осталось 2 симв.)"
4. Нажать "Опубликовать"
5. **Результат:** ✅ Ошибка "Текст статьи должен содержать минимум 10 символов."

### Сценарий 4: Валидные данные
1. Ввести заголовок "Моя первая статья" (17 символов)
2. Ввести текст "Это интересная история о том, как я начал писать" (48 символов)
3. Нажать "Опубликовать"
4. **Результат:** ✅ Статья успешно создана и открыта

### Сценарий 5: Очистка ошибки
1. Получить ошибку валидации
2. Начать редактировать любое поле
3. **Результат:** ✅ Ошибка автоматически исчезает

## Совместимость

- ✅ Работает во всех современных браузерах (HTML5 validation)
- ✅ Сохранена обратная совместимость
- ✅ Синхронизировано с требованиями бэкенда
- ✅ Поддержка accessibility (aria-live для ошибок)

## Дополнительные улучшения

В будущем можно добавить:
1. Живую валидацию по мере ввода (с debounce)
2. Визуальные индикаторы валидности (зеленая/красная обводка)
3. Прогресс-бар минимального количества символов
4. Автосохранение черновиков
